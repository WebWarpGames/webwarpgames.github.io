<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiplayer Testspiel</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js" integrity="sha384-YQa7EC3gNCbRnyj4bdXWZvq0qeJBaxsAcJWw6Vzi7cxd/J7tlTZ9N/ZH4CVhM+s5" crossorigin="anonymous"></script>
</head>
<body>
    <h1>Multiplayer Testspiel</h1>
    <canvas id="gameCanvas" width="500" height="500"></canvas>
    <div id="log"></div>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const logDiv = document.getElementById('log');

        const socket = io('http://silasmc.duckdns.org:3434');

        function logMessage(message) {
            const logEntry = document.createElement('div');
            logEntry.textContent = message;
            logDiv.appendChild(logEntry);
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        socket.on('id_assigned', (data) => {
            logMessage(`WebWarp-Multiplayer-ID zugewiesen: ${data.id}`);
        });

        socket.on('update', (data) => {
            logMessage(`Nachricht vom Server: ${JSON.stringify(data)}`);

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = 'red';
            ctx.fillRect(data.x, data.y, 50, 50);
        });

        canvas.addEventListener('mousemove', (event) => {
            const rect = canvas.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;

            socket.emit('move', { x: x, y: y });
        });
    </script>
</body>
</html>